---
title: 位操作
tags:
  - C
categories:
  - Language
  - C
---
# 进制转换

$$
7=2\times 3+1=2\times(2\times1+1)+1=2^2\times1+2^1\times1+2^0\times1=111_{(2)}
$$

| 16进制 | 0x1  | 0x2  | 0x3  | 0x4  | 0x5  | 0x6  | 0x7  | 0x8  | 0x9  | 0xa  | 0xb  | 0xc  | 0xd  | 0xe  | 0xf  |
| ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 2进制  | 0001 | 0010 | 0011 | 0100 | 0101 | 0110 | 0111 | 1000 | 1001 | 1010 | 1011 | 1100 | 1101 | 1110 | 1111 |



# 按位逻辑运算符

该操作产生了一个新的位值，但是不改变其运算对象。

| 运算符 |                              |
| :----: | :--------------------------- |
|   ~    | 按位非                       |
|   &    | 按位与                       |
|   \|   | 按位或                       |
|   ^    | 按位异或（相同为1，不同为0） |
|   &=   | 按位与赋值                   |
|  \|=   | 按位或赋值                   |
|   ^=   | 按位异或赋值                 |

# 移位运算符

该操作产生了一个新的位值，但是不改变其运算对象。

| 运算符 | 作用                                                         |
| :----: | ------------------------------------------------------------ |
|   <<   | 左移                                                         |
|   >>   | 右移<br />对于无符号类型，用 0 填充空出的位置；对于有符号类型，其结果取决于机器。 |
|  <<=   | 左移赋值                                                     |
|  >>=   | 右移赋值                                                     |

# 位字段（位域）（bitfields）

C 标准中只允许 `unsigned int`、`signed int`、`int` 类型的位域申明，C99又增加了 `bool` 类型的支持；
一些编译器像 `gcc`、`msvc`等自行加入了一些扩展，使得其他的类型(`short、char`等)也支持位域。

```c
struct
{
unsigned int autfd: 1;
unsigned int bldfc: 1;
unsigned int undln: 1;
unsigned int itals:	1;
bool is	: 1;
} prnt;
```

bool 的成员可以赋值 true 或 false.
可用未命名字段对齐。若用长度为0的未命名字段对齐，会在其后新建一个变量。
